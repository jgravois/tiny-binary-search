{"version":3,"file":"binary-search-index.js","sources":["..//Users/patricklocal/code/tiny-binary-search/index.js"],"sourcesContent":["export default class BinarySearchIndex {\n  constructor (values = []) {\n    this.values = [].concat(values);\n  }\n\n  query (value) {\n    var index = this.getIndex(value);\n    return this.values[index];\n  }\n\n  getIndex (value) {\n    if (this.dirty) {\n      this.sort();\n    }\n\n    var minIndex = 0;\n    var maxIndex = this.values.length - 1;\n    var currentIndex;\n    var currentElement;\n\n    while (minIndex <= maxIndex) {\n      currentIndex = (minIndex + maxIndex) / 2 | 0;\n      currentElement = this.values[Math.round(currentIndex)];\n      if (+currentElement.value < +value) {\n        minIndex = currentIndex + 1;\n      } else if (+currentElement.value > +value) {\n        maxIndex = currentIndex - 1;\n      } else {\n        return currentIndex;\n      }\n    }\n\n    return Math.abs(~maxIndex);\n  }\n\n  between (start, end) {\n    var startIndex = this.getIndex(start);\n    var endIndex = this.getIndex(end);\n\n    if (startIndex === 0 && endIndex === 0) {\n      return [];\n    }\n\n    while (this.values[startIndex - 1] && this.values[startIndex - 1].value === start) {\n      startIndex--;\n    }\n\n    while (this.values[endIndex + 1] && this.values[endIndex + 1].value === end) {\n      endIndex++;\n    }\n\n    if (this.values[endIndex].value === end) {\n      endIndex++;\n    }\n\n    return this.values.slice(startIndex, endIndex);\n  }\n\n  insert (item) {\n    this.values.splice(this.getIndex(item.value), 0, item);\n    return this;\n  }\n\n  bulkAdd (items = [], sort = false) {\n    this.values = this.values.concat([].concat(items));\n\n    if (sort) {\n      this.sort();\n    } else {\n      this.dirty = true;\n    }\n\n    return this;\n  }\n\n  sort () {\n    this.values.sort(function (a, b) {\n      return +b.value - +a.value;\n    }).reverse();\n    this.dirty = false;\n    return this;\n  }\n}\n"],"names":[],"mappings":"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"}